{{/* layouts/partials/sections/features.html */}}
{{ $styleToUse := trim (index . "style") " \n\r\t" }}

<section id="{{ index . "id" | default "features" }}" class="features pa3 pa5-ns">
  <div class="container mw9 center">
    {{ with (index . "title") }}<h2 class="f2 tc mb4">{{ . }}</h2>{{ end }}
    {{ with (index . "description") }}<p class="f4 tc measure-wide center lh-copy mb4">{{ . }}</p>{{ end }}

    {{ if eq $styleToUse "grid_3_column" }}
      <div class="flex-ns flex-wrap justify-around">
        {{ range (index . "items") }}
          <div class="w-100 w-third-ns pa3 tc">
            {{ with (index . "icon") }}<i class="fas fa-{{ . }} fa-3x mb2"></i>{{ end }} {{/* Assuming Font Awesome */}}
            {{ with (index . "title") }}<h3 class="f4">{{ . }}</h3>{{ end }}
            {{ with (index . "text") }}<p class="lh-copy measure-narrow center">{{ . }}</p>{{ end }}
          </div>
        {{ end }}
      </div>
    {{ else if eq $styleToUse "list_icon_left" }}
      <ul class="list pl0">
        {{ range (index . "items") }}
          <li class="flex items-center lh-copy pa3 ph0-l bb b--black-10">
            {{ with (index . "icon") }}<i class="fas fa-{{ . }} fa-2x mr3"></i>{{ end }} {{/* Assuming Font Awesome */}}
            <div class="pl3 flex-auto">
              {{ with (index . "title") }}<span class="f4 db black-70">{{ . }}</span>{{ end }}
              {{ with (index . "text") }}<span class="f6 db black-70">{{ . }}</span>{{ end }}
            </div>
          </li>
        {{ end }}
      </ul>
    {{ else }}
      <p class="tc i"><em>Unhandled feature style: [{{ $styleToUse | default "none" }}].</em></p>
    {{ end }}
  </div>
</section>
